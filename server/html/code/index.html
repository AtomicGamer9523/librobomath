<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/favicon.ico?s=192" type="image/x-icon">
    <link rel="stylesheet" href="/style.css">
    <title>ARC</title>
</head>
<body>
    <main>
        <script>
            async function onFormSubmit() {
                const form = document.getElementById("fileform");
                const formData = new FormData(form);
                /**@type {string}*/
                const body = await formData.get("filename").text();
                /**@type {string}*/
                const name = formData.get("filename").name;
                const response = await fetch(
                    `http://127.0.0.1:8000/code/upload?name=${name}`,
                    { method: "POST", body }
                );
                /**@type {{ok:boolean,msg:string}}*/
                const text = await response.json();
                if (text.ok) {
                    alert("Upload successful");
                } else {
                    alert(text.msg);
                }
            }
        </script>
        <form id="fileform" action="#" method="post" enctype="multipart/form-data">
            <label for="file">Select a file:</label>
            <input type="file" id="file" name="filename" accept=".py" required>
            <br>
            <input type="button" value="Upload" onclick="onFormSubmit()">
        </form>
    </main>
    <footer>{{__DEBUG__}}</footer>
</body>
</html>
